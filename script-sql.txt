INSERT INTO `roles` (`id`, `name`, `guard_name`, `created_at`, `updated_at`) VALUES (NULL, 'finance', 'web', NULL, NULL);
ALTER TABLE `data_payroll` CHANGE `created_at` `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE `generate_payroll` CHANGE `created_at` `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE `data_payroll` ADD `persen_kehadiran` INT NOT NULL DEFAULT '0' AFTER `tunjangan`;
ALTER TABLE `skpd` ADD `pemilik` VARCHAR(100) NOT NULL COMMENT 'ini berisi NIP' AFTER `deleted_at`;
ALTER TABLE `skpd` CHANGE `pemilik` `pemilik` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'ini berisi NIP';

CREATE TABLE  `m_menu` (`id` INT NOT NULL AUTO_INCREMENT , `kode_menu` VARCHAR(120) NOT NULL , `nama` VARCHAR(120) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
ALTER TABLE `m_menu` ADD `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER `nama`, ADD `updated_at` DATETIME NULL DEFAULT NULL AFTER `created_at`;
CREATE TABLE  `role_menu` (`id` INT NOT NULL AUTO_INCREMENT , `kode_level` INT NOT NULL COMMENT 'untuk level jabatan' , `kode_menu` INT NOT NULL , `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP , `updated_at` DATETIME NULL DEFAULT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
ALTER TABLE `role_menu` CHANGE `kode_level` `kode_level` VARCHAR(110) NOT NULL COMMENT 'untuk level jabatan', CHANGE `kode_menu` `kode_menu` VARCHAR(110) NOT NULL;
ALTER TABLE `users` ADD `created_by` INT NOT NULL DEFAULT '0' AFTER `updated_at`;
ALTER TABLE `users` ADD `updated_by` INT NOT NULL DEFAULT '0' AFTER `created_by`;
ALTER TABLE `role_menu` CHANGE `kode_level` `kode_tingkat` VARCHAR(110) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'untuk jabatan';
ALTER TABLE `m_menu` ADD `sub_menu` TEXT NOT NULL AFTER `nama`;
ALTER TABLE `role_menu` ADD `has_permission` VARCHAR(20) NOT NULL AFTER `kode_menu`;

ALTER TABLE `total_presensi_detail` CHANGE `status` `status` VARCHAR(30) NOT NULL COMMENT '1 : Masuk\r\n2 : Telat\r\n3 : Alpha\r\n4 : Izin\r\n';
ALTER TABLE `users` CHANGE `password` `password` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
INSERT INTO `app_status_function` (`id`, `name`, `value`) VALUES (NULL, 'excel_template_pegawai_version', '1');
ALTER TABLE `app_status_function` CHANGE `value` `value` TEXT NOT NULL;

CREATE TABLE `daftar_bonus_payroll` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `kode_bonus` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_periode` tinyint(4) DEFAULT 0 COMMENT '0 berarti selamanya',
  `bulan` tinyint(4) DEFAULT NULL,
  `tahun` year(4) DEFAULT NULL,
  `keterangan` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '0 Semua Pegawai, 1 Pegawai Terpilih, 2 Jabatan Terpilih, 3 Level Jabatan, 4 Divisi Kerja',
  `kode_keterangan` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
ALTER TABLE `daftar_bonus_payroll` CHANGE `id` `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT, add PRIMARY KEY (`id`);

ALTER TABLE `ms_tunjangan` ADD `jenis_nilai` BIGINT NOT NULL DEFAULT '0' AFTER `nama`, ADD `nilai` BIGINT NOT NULL DEFAULT '0' AFTER `jenis_nilai`;
ALTER TABLE `ms_tunjangan` CHANGE `jenis_nilai` `jenis_nilai` BIGINT(20) NOT NULL DEFAULT '0' COMMENT '0 : Nominal, 1 : persen';
ALTER TABLE `ms_tunjangan` CHANGE `jenis_nilai` `satuan` BIGINT(20) NOT NULL DEFAULT '0' COMMENT '0 : Nominal, 1 : persen';


ALTER TABLE `payroll_tambah` CHANGE `kode_payroll` `kode_payroll` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
ALTER TABLE `payroll_kurang` CHANGE `kode_payroll` `kode_payroll` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
ALTER TABLE `payroll_tambah` CHANGE `nilai` `nilai` DOUBLE NOT NULL DEFAULT '0';
ALTER TABLE `payroll_kurang` CHANGE `nilai` `nilai` DOUBLE NOT NULL DEFAULT '0';
ALTER TABLE `payroll_kurang` CHANGE `nilai` `nilai` DOUBLE NULL DEFAULT '0';
ALTER TABLE `payroll_tambah` CHANGE `nilai` `nilai` DOUBLE NULL DEFAULT '0';

CREATE TABLE `jadwal_shift` (`id` INT NOT NULL AUTO_INCREMENT , `nip` VARCHAR(225) NOT NULL , `kode_shift` VARCHAR(225) NOT NULL , `tanggal` DATE NOT NULL , `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP , `updated_at` DATETIME NULL DEFAULT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `hari_jam_kerja` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `kode_jam_kerja` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `hari` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `jam_buka_datang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tepat_datang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tutup_datang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `toleransi_datang` int(11) DEFAULT NULL COMMENT 'dalam menit',
  `jam_buka_istirahat` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tepat_istirahat` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tutup_istirahat` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `toleransi_istirahat` int(11) DEFAULT NULL COMMENT 'dalam menit',
  `jam_buka_pulang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tepat_pulang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `jam_tutup_pulang` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `toleransi_pulang` int(11) DEFAULT NULL COMMENT 'dalam menit',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
ALTER TABLE `hari_jam_kerja` ADD `tipe` INT NOT NULL DEFAULT '0' AFTER `toleransi_pulang`, ADD `parent` INT NULL DEFAULT NULL AFTER `tipe`;
ALTER TABLE `hari_jam_kerja` ADD PRIMARY KEY(`id`);
ALTER TABLE `hari_jam_kerja` CHANGE `id` `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT;
ALTER TABLE `aktifitas` CHANGE `jam_mulai` `jam_mulai` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE `aktifitas` ADD `jam_selesai` DATETIME NULL DEFAULT NULL AFTER `jam_mulai`;

ALTER TABLE `shift` ADD `kode_skpd` VARCHAR(225) NOT NULL AFTER `id`;
ALTER TABLE `aktifitas` CHANGE `jam_mulai` `jam_mulai` TIME NOT NULL DEFAULT CURRENT_TIMESTAMP, CHANGE `jam_selesai` `jam_selesai` TIME NULL DEFAULT NULL;
CREATE TABLE `manage_lokasi_kerja` (`id` INT NOT NULL AUTO_INCREMENT , `kode_lokasi` VARCHAR(225) NOT NULL , `nip` VARCHAR(225) NOT NULL , `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP , `updated_at` DATETIME NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
ALTER TABLE `lokasi` ADD `kode_skpd` VARCHAR(225) NULL DEFAULT NULL AFTER `id`;
ALTER TABLE `manage_lokasi_kerja` CHANGE `updated_at` `updated_at` DATETIME NULL DEFAULT NULL;
ALTER TABLE `lokasi` CHANGE `kode_skpd` `kode_skpd` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL;